# 게임 엔진의 원리

---

## 🖊️ 개념

- **게임 엔진**은 low - level을 감싸고 있는 **이미 완성된 기반 코드를 제공**한다.
- 개발자는 게임 개발에 필요한 도구들을 직접 개발할 필요 없이 게임 엔진에서 이미 구현되어 제공되는 기능들을 **재사용**하기만 하면 되어 편리하다.

## 🌐 클래스

---

- 클래스란 묘사할 대상과 관련된 대상들을 묶어놓은 단위.
- 예를 들어 Monster라는 클래스가 있으면 그 안엔 Monster와 관련된 변수나 기능들만이 들어가야 한다.
- 모든 오브젝트 혹은 캐릭터에 공통으로 들어가는 특징을 클래스로 정의 해두면 이를 재사용하면 되니 편리하게 쓸 수 있다.

## 👪 상속

---

- **상속**이란 이미 만들어진 클래스(**부모 클래스**)를 기반으로 자신만의 새로운 기능을 덧붙여서 새로운 클래스(**자식 클래스**)를 만드는 방법이다.
- 자식 클래스는 부모 클래스에게 물려받은 부분을 **또 다시 작성할 필요가 없다.**
- 다만 상속은 늘 불안정하다. 완벽하게 필요로 하는 기능만을 가진 클래스는 만들기 힘들 뿐더러 상속받을 때는 골라서 물려받을 수 없기에, **자식 클래스는 필요로 하지 않는 기능을 상속받을 수 있기 때문**이다.
- 이러한 이유로 게임을 개발할 땐 오로지 상속에만 의지해선 안된다. 미래에 사용될 최소 필수 집합을 미리 예상하는 것은 힘들기 때문.

## 🧭 컴포넌트

---

- 컴포넌트는 재사용과 상속의 개념과 밀접해있다.
- 컴포넌트란 **게임 오브젝트에 붙일 수 있는 미리 만들어진 부품**과 같은 개념이다.
- 한 오브젝트에 붙어있는 컴포넌트들은 서로 독립적으로 작동한다.
- 컴포넌트의 장점
    - 유연한 재사용. 필요한 기능만을 가져다 붙이면 되는 편의성.
    - 프로그래밍 의존도가 낮아짐.
    - 추가와 삭제의 용이. 각각 독립적으로 작동하는 컴포넌트는 불필요한 하나를 제거한다고 문제가 될 일이 없다.
- 프로젝트에 추가하는 **C# 스크립트**도 오브젝트에게 특정 기능을 붙여주는 **컴포넌트**이다.
- 이를 정리하자면 컴포넌트는 A is B의 상속 개념이 아닌 A has B의 구조로서 빈 컨테이너에 필요한 기능들을 원할 때 갖다 붙여 포함시키는 것이고 이를 게임 오브젝트 - 컴포넌트라고 한다.

- 컴포넌트가 가진 기능.
    - **Start.** 컴포넌트 초기화 부분.
        - 게임이 활성화 되는순간 Start 안의 내용대로 오브젝트를 초기화 시키는 역할.
        - 유니티는 게임 시작시 Start 메세지를 뿌린다.
    - **Update**
        - 1초에 수십번씩 자신의 상태를 갱신. 주기적으로 실행된다.
        - 외부에서 직접 부를 필요 없이 자신이 계속 매 프레임마다 실행시킨다.

## 🧱 게임 오브젝트

---

- 단순 홀더, 빈 껍데기이다. 이는 스스로 필요한 기능을 지니지 않는다는 의미이다.
- **물건 하나가 게임 오브젝트 하나**에 대응된다 생각하면 된다.
- 게임 오브젝트는 무엇이던지 **transform**을 가진다. 이는 위치 크기 각도 등을 조정 가능한 기본 컴포넌트이다. 게임 오브젝트와 1:1 관계로 C# 스크립트에 네임 스페이스를 따로 추가하지 않아도 된다.

## 🏫 MonoBehaviour 클래스

---

- **컴포넌트들은 모두 위의 클래스를 상속받는다.**
- 모든 컴포넌트들이 필요한 **필수 기능을 제공**한다
    - 유니티의 통제를 받는다.
    - 유니티의 이벤트 메세지를 감지할 수 있게 된다.
- C# 클래스 스크립트를 컴포넌트로 인식하기 위해 반드시 이를 상속받아야 한다.

## 🎫 메세지

---

- 메세지란 브로드 캐스팅이 보내는 것이며 MonoBehaviour 클래스를 상속받아야만 받을 수 있다.
- 수신자와 송신자는 서로 주고 받을 뿐 서로 신경쓰진 않으며 컴포넌트 끼리는 기본적으로 서로의 존재를 모른다.
- 메시지를 받으면 그 명세에 따라 각 컴포넌트들은 자신의 할일을 할 뿐이다.
- 일괄 실행은 가능하나 여기서도 서로의 독립성은 보장된다.

## 📢 브로드 캐스팅

---

- **메세지를 무차별적으로 많이 보내는 것이다.**
- 해당되는 컴포넌트들이 반응하도록 100개의 오브젝트가 있으면 100개의 메시지를 뿌리는 것이다.

## 🎇 유니티 이벤트 메서드

---

- 메세지를 통해 이름만 맞춰 구현하면 실행해야 할 타이밍에 자동으로 컴포넌트가 실행된다.
- Start. Unity 게임이 시작되는 타이밍. 게임이 시작될 때 유니티가 보내는 메세지.
- Update. 그냥 매 프레임마다 계속 실행됨.
- **OntrigerEnter**. 컴포넌트들은 충돌이 발생해도 본인들은 인지하지 못한다. 따라서 유니티가 해당 메세지를 보낼 시 **이 메세지에 반응해 충돌처리를 하게 된다.**